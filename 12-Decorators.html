<html><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<title>12-Decorators</title>

<script type="text/javascript" src="12-Decorators_files/MathJax.js" charset="utf-8"></script>

<script type="text/javascript">
// MathJax disabled, set as null to distingish from *missing* MathJax,
// where it will be undefined, and should prompt a dialog later.
window.mathjax_url = "mathjax/MathJax.js";
</script>
<link rel="stylesheet" href="12-Decorators_files/jquery-wijmo.css" type="text/css">
<link rel="stylesheet" href="12-Decorators_files/codemirror.css">
<link rel="stylesheet" href="12-Decorators_files/markdown.css">
<link rel="stylesheet" href="12-Decorators_files/rst.css">
<link rel="stylesheet" href="12-Decorators_files/ipython.css">
<link rel="stylesheet" href="12-Decorators_files/default.css">
<link rel="stylesheet" href="12-Decorators_files/prettify.css">
<link rel="stylesheet" href="12-Decorators_files/boilerplate.css" type="text/css">
<link rel="stylesheet" href="12-Decorators_files/layout.css" type="text/css">
<link rel="stylesheet" href="12-Decorators_files/base.css" type="text/css">
<link rel="stylesheet" href="12-Decorators_files/notebook.css" type="text/css">
<link rel="stylesheet" href="12-Decorators_files/renderedhtml.css" type="text/css">


<meta name="read_only" content="False">
<style type="text/css">#MathJax_Zoom {position: absolute; background-color: #F0F0F0; overflow: auto; display: block; z-index: 301; padding: .5em; border: 1px solid black; margin: 0; font-family: serif; font-size: 85%; font-weight: normal; font-style: normal; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; box-shadow: 5px 5px 15px #AAAAAA; -webkit-box-shadow: 5px 5px 15px #AAAAAA; -moz-box-shadow: 5px 5px 15px #AAAAAA; -khtml-box-shadow: 5px 5px 15px #AAAAAA; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_ZoomOverlay {position: absolute; left: 0; top: 0; z-index: 300; display: inline-block; width: 100%; height: 100%; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
</style><style type="text/css">#MathJax_About {position: fixed; left: 50%; width: auto; text-align: center; border: 3px outset; padding: 1em 2em; background-color: #DDDDDD; cursor: default; font-family: message-box; font-size: 120%; font-style: normal; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; border-radius: 15px; -webkit-border-radius: 15px; -moz-border-radius: 15px; -khtml-border-radius: 15px; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
.MathJax_Menu {position: absolute; background-color: white; color: black; width: auto; padding: 5px 0px; border: 1px solid #CCCCCC; margin: 0; cursor: default; font: menu; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; border-radius: 5px; -webkit-border-radius: 5px; -moz-border-radius: 5px; -khtml-border-radius: 5px; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
.MathJax_MenuItem {padding: 1px 2em; background: transparent}
.MathJax_MenuTitle {background-color: #CCCCCC; margin: -5px 0 0 0; text-align: center; font-style: italic; font-size: 80%; color: #444444; padding: 2px 0; overflow: hidden}
.MathJax_MenuArrow {position: absolute; right: .5em; color: #666666}
.MathJax_MenuActive .MathJax_MenuArrow {color: white}
.MathJax_MenuCheck {position: absolute; left: .7em}
.MathJax_MenuRadioCheck {position: absolute; left: .7em}
.MathJax_MenuLabel {padding: 1px 2em 3px 1.33em; font-style: italic}
.MathJax_MenuRule {border-top: 1px solid #DDDDDD; margin: 4px 3px}
.MathJax_MenuDisabled {color: GrayText}
.MathJax_MenuActive {background-color: #606872; color: white}
</style><style type="text/css">#MathJax_Message {position: fixed; left: 1px; bottom: 2px; background-color: #E6E6E6; border: 1px solid #959595; margin: 0px; padding: 2px 8px; z-index: 102; color: black; font-size: 80%; width: auto; white-space: nowrap}
#MathJax_MSIE_Frame {position: absolute; top: 0; left: 0; width: 0px; z-index: 101; border: 0px; margin: 0px; padding: 0px}
.MathJax_Error {color: #CC0000; font-style: italic}
</style><style type="text/css">@media print { body { overflow: visible !important; } }.ui-widget-content { border: 0px; }</style><style type="text/css">#MathJax_Zoom {position: absolute; background-color: #F0F0F0; overflow: auto; display: block; z-index: 301; padding: .5em; border: 1px solid black; margin: 0; font-family: serif; font-size: 85%; font-weight: normal; font-style: normal; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; box-shadow: 5px 5px 15px #AAAAAA; -webkit-box-shadow: 5px 5px 15px #AAAAAA; -moz-box-shadow: 5px 5px 15px #AAAAAA; -khtml-box-shadow: 5px 5px 15px #AAAAAA; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_ZoomOverlay {position: absolute; left: 0; top: 0; z-index: 300; display: inline-block; width: 100%; height: 100%; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
</style><style type="text/css">#MathJax_About {position: fixed; left: 50%; width: auto; text-align: center; border: 3px outset; padding: 1em 2em; background-color: #DDDDDD; cursor: default; font-family: message-box; font-size: 120%; font-style: normal; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; border-radius: 15px; -webkit-border-radius: 15px; -moz-border-radius: 15px; -khtml-border-radius: 15px; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
.MathJax_Menu {position: absolute; background-color: white; color: black; width: auto; padding: 5px 0px; border: 1px solid #CCCCCC; margin: 0; cursor: default; font: menu; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; border-radius: 5px; -webkit-border-radius: 5px; -moz-border-radius: 5px; -khtml-border-radius: 5px; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
.MathJax_MenuItem {padding: 1px 2em; background: transparent}
.MathJax_MenuTitle {background-color: #CCCCCC; margin: -5px 0 0 0; text-align: center; font-style: italic; font-size: 80%; color: #444444; padding: 2px 0; overflow: hidden}
.MathJax_MenuArrow {position: absolute; right: .5em; color: #666666}
.MathJax_MenuActive .MathJax_MenuArrow {color: white}
.MathJax_MenuCheck {position: absolute; left: .7em}
.MathJax_MenuRadioCheck {position: absolute; left: .7em}
.MathJax_MenuLabel {padding: 1px 2em 3px 1.33em; font-style: italic}
.MathJax_MenuRule {border-top: 1px solid #DDDDDD; margin: 4px 3px}
.MathJax_MenuDisabled {color: GrayText}
.MathJax_MenuActive {background-color: #606872; color: white}
</style><style type="text/css">#MathJax_Message {position: fixed; left: 1px; bottom: 2px; background-color: #E6E6E6; border: 1px solid #959595; margin: 0px; padding: 2px 8px; z-index: 102; color: black; font-size: 80%; width: auto; white-space: nowrap}
#MathJax_MSIE_Frame {position: absolute; top: 0; left: 0; width: 0px; z-index: 101; border: 0px; margin: 0px; padding: 0px}
.MathJax_Error {color: #CC0000; font-style: italic}
</style></head><body style="overflow: auto;"><div tabindex="2" class="cell text_cell border-box-sizing ui-widget-content ui-corner-all"><div style="display: none;" class="text_cell_input"><div class="CodeMirror"><div style="overflow: hidden; position: relative; width: 1px; height: 0px;"><textarea style="position: absolute; width: 2px;" wrap="off" autocorrect="off" autocapitalize="off"></textarea></div><div class="CodeMirror-scroll cm-s-default"><div style="position: relative; height: 5px;"><div style="position: absolute; height: 0; width: 0; overflow: hidden;"><pre>x</pre></div><div style="position: relative"><div style="display: none;" class="CodeMirror-gutter"><div class="CodeMirror-gutter-text"></div></div><div class="CodeMirror-lines"><div style="position: relative" draggable="true"><pre class="CodeMirror-cursor">&nbsp;</pre><div></div></div></div></div></div></div></div></div><div tabindex="-1" class="text_cell_render rendered_html"><h1>Decorators</h1>

<h2>Basic decorator syntax</h2>

<p>Python <em>decorators</em> allow us to modify function and class definitions with a special syntax.</p></div></div><div tabindex="2" class="cell border-box-sizing code_cell vbox"><div class="input hbox"><div class="prompt input_prompt">In&nbsp;[3]:</div><div class="input_area box-flex1"><div class="CodeMirror"><div style="overflow: hidden; position: relative; width: 1px; height: 0px; top: 0px; left: 0px;"><textarea style="position: absolute; width: 2px;" wrap="off" autocorrect="off" autocapitalize="off"></textarea></div><div class="CodeMirror-scroll cm-s-ipython"><div style="position: relative; height: 206px;"><div style="position: absolute; height: 0; width: 0; overflow: hidden;"><pre><span>        print 'Calling %s(*%r, **%r)' % (function, args, kwargs)</span></pre></div><div style="position: relative; top: 0px;"><div style="display: none;" class="CodeMirror-gutter"><div class="CodeMirror-gutter-text"></div></div><div class="CodeMirror-lines"><div style="position: relative;" draggable="true"><pre style="top: 0px; left: 0px;" class="CodeMirror-cursor">&nbsp;</pre><div style=""><pre><span class="cm-keyword">def</span><span class="cm-null"> </span><span class="cm-variable">log_function_call</span><span class="cm-null">(</span><span class="cm-variable">function</span><span class="cm-null">):</span></pre><pre><span class="cm-null">    </span><span class="cm-keyword">def</span><span class="cm-null"> </span><span class="cm-variable">wrapper</span><span class="cm-null">(</span><span class="cm-operator">*</span><span class="cm-variable">args</span><span class="cm-null">, </span><span class="cm-operator">**</span><span class="cm-variable">kwargs</span><span class="cm-null">):</span></pre><pre><span class="cm-null">        </span><span class="cm-keyword">print</span><span class="cm-null"> </span><span class="cm-string">'Calling %s(*%r, **%r)'</span><span class="cm-null"> </span><span class="cm-operator">%</span><span class="cm-null"> (</span><span class="cm-variable">function</span><span class="cm-null">, </span><span class="cm-variable">args</span><span class="cm-null">, </span><span class="cm-variable">kwargs</span><span class="cm-null">)</span></pre><pre><span class="cm-null">        </span><span class="cm-keyword">return</span><span class="cm-null"> </span><span class="cm-variable">function</span><span class="cm-null">(</span><span class="cm-operator">*</span><span class="cm-variable">args</span><span class="cm-null">, </span><span class="cm-operator">**</span><span class="cm-variable">kwargs</span><span class="cm-null">)</span></pre><pre><span class="cm-null">    </span><span class="cm-keyword">print</span><span class="cm-null"> </span><span class="cm-string">'returning wrapped %s'</span><span class="cm-null"> </span><span class="cm-operator">%</span><span class="cm-null"> </span><span class="cm-variable">function</span></pre><pre><span class="cm-null">    </span><span class="cm-keyword">return</span><span class="cm-null"> </span><span class="cm-variable">wrapper</span></pre><pre> </pre><pre><span class="cm-keyword">def</span><span class="cm-null"> </span><span class="cm-variable">myfunction</span><span class="cm-null">(</span><span class="cm-variable">a</span><span class="cm-null">, </span><span class="cm-variable">b</span><span class="cm-null">):</span></pre><pre><span class="cm-null">    </span><span class="cm-keyword">print</span><span class="cm-null"> </span><span class="cm-string">'myfunction(%r, %r)'</span><span class="cm-null"> </span><span class="cm-operator">%</span><span class="cm-null"> (</span><span class="cm-variable">a</span><span class="cm-null">,</span><span class="cm-variable">b</span><span class="cm-null">)</span></pre><pre><span class="cm-null">    </span></pre><pre><span class="cm-variable">myfunction</span><span class="cm-null"> = </span><span class="cm-variable">log_function_call</span><span class="cm-null">(</span><span class="cm-variable">myfunction</span><span class="cm-null">)</span></pre></div></div></div></div></div></div></div></div></div><div style="display: -moz-box;" class="output vbox"><div class="hbox output_area"><div class="prompt"></div><div class="box_flex1 output_subarea output_text output_stream output_stdout"><pre>returning wrapped &lt;function myfunction at 0x27eaf50&gt;</pre></div></div></div></div><div tabindex="2" class="cell border-box-sizing code_cell vbox"><div class="input hbox"><div class="prompt input_prompt">In&nbsp;[4]:</div><div class="input_area box-flex1"><div class="CodeMirror"><div style="overflow: hidden; position: relative; width: 1px; height: 0px; top: 0px; left: 0px;"><textarea style="position: absolute; width: 2px;" wrap="off" autocorrect="off" autocapitalize="off"></textarea></div><div class="CodeMirror-scroll cm-s-ipython"><div style="position: relative; height: 30px;"><div style="position: absolute; height: 0; width: 0; overflow: hidden;"><pre><span>myfunction('avalue', 'bvalue')</span></pre></div><div style="position: relative; top: 0px;"><div style="display: none;" class="CodeMirror-gutter"><div class="CodeMirror-gutter-text"></div></div><div class="CodeMirror-lines"><div style="position: relative;" draggable="true"><pre style="top: 0px; left: 0px;" class="CodeMirror-cursor">&nbsp;</pre><div style=""><pre><span class="cm-variable">myfunction</span><span class="cm-null">(</span><span class="cm-string">'avalue'</span><span class="cm-null">, </span><span class="cm-string">'bvalue'</span><span class="cm-null">)</span></pre></div></div></div></div></div></div></div></div></div><div style="display: -moz-box;" class="output vbox"><div class="hbox output_area"><div class="prompt"></div><div class="box_flex1 output_subarea output_text output_stream output_stdout"><pre>Calling &lt;function myfunction at 0x27eaf50&gt;(*('avalue', 'bvalue'), **{})
myfunction('avalue', 'bvalue')</pre></div></div></div></div><div tabindex="2" class="cell text_cell border-box-sizing"><div style="display: none;" class="text_cell_input"><div class="CodeMirror"><div style="overflow: hidden; position: relative; width: 1px; height: 0px;"><textarea style="position: absolute; width: 2px;" wrap="off" autocorrect="off" autocapitalize="off"></textarea></div><div class="CodeMirror-scroll cm-s-default"><div style="position: relative; height: 1px;"><div style="position: absolute; height: 0; width: 0; overflow: hidden;"><pre>x</pre></div><div style="position: relative"><div style="display: none;" class="CodeMirror-gutter"><div class="CodeMirror-gutter-text"></div></div><div class="CodeMirror-lines"><div style="position: relative" draggable="true"><pre class="CodeMirror-cursor">&nbsp;</pre><div></div></div></div></div></div></div></div></div><div tabindex="-1" class="text_cell_render rendered_html"><p>A nicer syntax for this uses the <code>@</code> sign:</p></div></div><div tabindex="2" class="cell border-box-sizing code_cell vbox"><div class="input hbox"><div class="prompt input_prompt">In&nbsp;[6]:</div><div class="input_area box-flex1"><div class="CodeMirror"><div style="overflow: hidden; position: relative; width: 1px; height: 0px; top: 0px; left: 0px;"><textarea style="position: absolute; width: 2px;" wrap="off" autocorrect="off" autocapitalize="off"></textarea></div><div class="CodeMirror-scroll cm-s-ipython"><div style="position: relative; height: 100px;"><div style="position: absolute; height: 0; width: 0; overflow: hidden;"><pre><span>    print 'myfunction(%r, %r)' % (a,b)</span></pre></div><div style="position: relative; top: 0px;"><div style="display: none;" class="CodeMirror-gutter"><div class="CodeMirror-gutter-text"></div></div><div class="CodeMirror-lines"><div style="position: relative;" draggable="true"><pre style="top: 0px; left: 0px;" class="CodeMirror-cursor">&nbsp;</pre><div style=""><pre><span class="cm-meta">@log_function_call</span></pre><pre><span class="cm-keyword">def</span><span class="cm-null"> </span><span class="cm-variable">myfunction</span><span class="cm-null">(</span><span class="cm-variable">a</span><span class="cm-null">,</span><span class="cm-variable">b</span><span class="cm-null">):</span></pre><pre><span class="cm-null">    </span><span class="cm-keyword">print</span><span class="cm-null"> </span><span class="cm-string">'myfunction(%r, %r)'</span><span class="cm-null"> </span><span class="cm-operator">%</span><span class="cm-null"> (</span><span class="cm-variable">a</span><span class="cm-null">,</span><span class="cm-variable">b</span><span class="cm-null">)</span></pre><pre><span class="cm-error">   </span></pre><pre><span class="cm-variable">myfunction</span><span class="cm-null">(</span><span class="cm-string">'avalue'</span><span class="cm-null">, </span><span class="cm-string">'bvalue'</span><span class="cm-null">)</span></pre></div></div></div></div></div></div></div></div></div><div style="display: -moz-box;" class="output vbox"><div class="hbox output_area"><div class="prompt"></div><div class="box_flex1 output_subarea output_text output_stream output_stdout"><pre>returning wrapped &lt;function myfunction at 0x27eaed8&gt;
Calling &lt;function myfunction at 0x27eaed8&gt;(*('avalue', 'bvalue'), **{})
myfunction('avalue', 'bvalue')</pre></div></div></div></div><div tabindex="2" class="cell text_cell border-box-sizing"><div style="display: none;" class="text_cell_input"><div class="CodeMirror"><div style="overflow: hidden; position: relative; width: 1px; height: 0px;"><textarea style="position: absolute; width: 2px;" wrap="off" autocorrect="off" autocapitalize="off"></textarea></div><div class="CodeMirror-scroll cm-s-default"><div style="position: relative; height: 1px;"><div style="position: absolute; height: 0; width: 0; overflow: hidden;"><pre>x</pre></div><div style="position: relative"><div style="display: none;" class="CodeMirror-gutter"><div class="CodeMirror-gutter-text"></div></div><div class="CodeMirror-lines"><div style="position: relative" draggable="true"><pre class="CodeMirror-cursor">&nbsp;</pre><div></div></div></div></div></div></div></div></div><div tabindex="-1" class="text_cell_render rendered_html"><p>We can also decorate class definitions:</p></div></div><div tabindex="2" class="cell border-box-sizing code_cell vbox"><div class="input hbox"><div class="prompt input_prompt">In&nbsp;[8]:</div><div class="input_area box-flex1"><div class="CodeMirror"><div style="overflow: hidden; position: relative; width: 1px; height: 0px; top: 0px; left: 0px;"><textarea style="position: absolute; width: 2px;" wrap="off" autocorrect="off" autocapitalize="off"></textarea></div><div class="CodeMirror-scroll cm-s-ipython"><div style="position: relative; height: 241px;"><div style="position: absolute; height: 0; width: 0; overflow: hidden;"><pre><span>    cls.myproperty = 'Magically added by decorator'</span></pre></div><div style="position: relative; top: 0px;"><div style="display: none;" class="CodeMirror-gutter"><div class="CodeMirror-gutter-text"></div></div><div class="CodeMirror-lines"><div style="position: relative;" draggable="true"><pre style="top: 0px; left: 0px;" class="CodeMirror-cursor">&nbsp;</pre><div style=""><pre><span class="cm-keyword">def</span><span class="cm-null"> </span><span class="cm-variable">add_myproperty</span><span class="cm-null">(</span><span class="cm-variable">cls</span><span class="cm-null">):</span></pre><pre><span class="cm-null">    </span><span class="cm-variable">cls.myproperty</span><span class="cm-null"> = </span><span class="cm-string">'Magically added by decorator'</span></pre><pre><span class="cm-null">    </span><span class="cm-keyword">return</span><span class="cm-null"> </span><span class="cm-variable">cls</span></pre><pre> </pre><pre><span class="cm-meta">@add_myproperty</span></pre><pre><span class="cm-keyword">class</span><span class="cm-null"> </span><span class="cm-variable">MyClass</span><span class="cm-null">(</span><span class="cm-builtin">object</span><span class="cm-null">):</span></pre><pre><span class="cm-null">    </span><span class="cm-keyword">def</span><span class="cm-null"> </span><span class="cm-variable">__init__</span><span class="cm-null">(</span><span class="cm-variable">self</span><span class="cm-null">, </span><span class="cm-variable">a</span><span class="cm-null">, </span><span class="cm-variable">b</span><span class="cm-null">):</span></pre><pre><span class="cm-null">        </span><span class="cm-variable">self._a</span><span class="cm-null"> = </span><span class="cm-variable">a</span></pre><pre><span class="cm-null">        </span><span class="cm-variable">self._b</span><span class="cm-null"> = </span><span class="cm-variable">b</span></pre><pre><span class="cm-null">    </span><span class="cm-keyword">def</span><span class="cm-null"> </span><span class="cm-variable">__repr__</span><span class="cm-null">(</span><span class="cm-variable">self</span><span class="cm-null">):</span></pre><pre><span class="cm-null">        </span><span class="cm-keyword">return</span><span class="cm-null"> </span><span class="cm-string">'MyClass(%r, %r)'</span><span class="cm-null"> </span><span class="cm-operator">%</span><span class="cm-null"> (</span><span class="cm-variable">a</span><span class="cm-null">,</span><span class="cm-variable">b</span><span class="cm-null">)</span></pre><pre><span class="cm-null">    </span></pre><pre><span class="cm-variable">MyClass.myproperty</span></pre></div></div></div></div></div></div></div></div></div><div style="display: -moz-box;" class="output vbox"><div class="hbox output_area"><div class="prompt output_prompt">Out[8]:</div><div class="box_flex1 output_subarea output_text"><pre>'Magically added by decorator'</pre></div></div></div></div><div tabindex="2" class="cell text_cell border-box-sizing"><div style="display: none;" class="text_cell_input"><div class="CodeMirror"><div style="overflow: hidden; position: relative; width: 1px; height: 0px;"><textarea style="position: absolute; width: 2px;" wrap="off" autocorrect="off" autocapitalize="off"></textarea></div><div class="CodeMirror-scroll cm-s-default"><div style="position: relative; height: 1px;"><div style="position: absolute; height: 0; width: 0; overflow: hidden;"><pre>x</pre></div><div style="position: relative"><div style="display: none;" class="CodeMirror-gutter"><div class="CodeMirror-gutter-text"></div></div><div class="CodeMirror-lines"><div style="position: relative" draggable="true"><pre class="CodeMirror-cursor">&nbsp;</pre><div></div></div></div></div></div></div></div></div><div tabindex="-1" class="text_cell_render rendered_html"><h2>Useful decorators</h2></div></div><div tabindex="2" class="cell border-box-sizing code_cell vbox"><div class="input hbox"><div class="prompt input_prompt">In&nbsp;[10]:</div><div class="input_area box-flex1"><div class="CodeMirror"><div style="overflow: hidden; position: relative; width: 1px; height: 0px; top: 0px; left: 0px;"><textarea style="position: absolute; width: 2px;" wrap="off" autocorrect="off" autocapitalize="off"></textarea></div><div class="CodeMirror-scroll cm-s-ipython"><div style="position: relative; height: 153px;"><div style="position: absolute; height: 0; width: 0; overflow: hidden;"><pre><span>        print 'Calling myproperty'</span></pre></div><div style="position: relative; top: 0px;"><div style="display: none;" class="CodeMirror-gutter"><div class="CodeMirror-gutter-text"></div></div><div class="CodeMirror-lines"><div style="position: relative;" draggable="true"><pre style="top: 0px; left: 0px;" class="CodeMirror-cursor">&nbsp;</pre><div style=""><pre><span class="cm-keyword">class</span><span class="cm-null"> </span><span class="cm-variable">MyClass</span><span class="cm-null">(</span><span class="cm-builtin">object</span><span class="cm-null">):</span></pre><pre><span class="cm-null">    </span><span class="cm-error">@property</span></pre><pre><span class="cm-null">    </span><span class="cm-keyword">def</span><span class="cm-null"> </span><span class="cm-variable">myproperty</span><span class="cm-null">(</span><span class="cm-variable">self</span><span class="cm-null">):</span></pre><pre><span class="cm-null">        </span><span class="cm-keyword">print</span><span class="cm-null"> </span><span class="cm-string">'Calling myproperty'</span></pre><pre><span class="cm-null">        </span><span class="cm-keyword">return</span><span class="cm-null"> </span><span class="cm-string">'myvalue'</span></pre><pre><span class="cm-null">    </span></pre><pre><span class="cm-variable">x</span><span class="cm-null"> = </span><span class="cm-variable">MyClass</span><span class="cm-null">()</span></pre><pre><span class="cm-keyword">print</span><span class="cm-null"> </span><span class="cm-variable">x.myproperty</span></pre></div></div></div></div></div></div></div></div></div><div style="display: -moz-box;" class="output vbox"><div class="hbox output_area"><div class="prompt"></div><div class="box_flex1 output_subarea output_text output_stream output_stdout"><pre>Calling myproperty
myvalue</pre></div></div></div></div><div tabindex="2" class="cell border-box-sizing code_cell vbox"><div class="input hbox"><div class="prompt input_prompt">In&nbsp;[13]:</div><div class="input_area box-flex1"><div class="CodeMirror"><div style="overflow: hidden; position: relative; width: 1px; height: 0px; top: 0px; left: 0px;"><textarea style="position: absolute; width: 2px;" wrap="off" autocorrect="off" autocapitalize="off"></textarea></div><div class="CodeMirror-scroll cm-s-ipython"><div style="position: relative; height: 399px;"><div style="position: absolute; height: 0; width: 0; overflow: hidden;"><pre><span>        print 'Getting myproperty'</span></pre></div><div style="position: relative; top: 0px;"><div style="display: none;" class="CodeMirror-gutter"><div class="CodeMirror-gutter-text"></div></div><div class="CodeMirror-lines"><div style="position: relative;" draggable="true"><pre style="top: 0px; left: 0px;" class="CodeMirror-cursor">&nbsp;</pre><div style=""><pre><span class="cm-keyword">class</span><span class="cm-null"> </span><span class="cm-variable">MyClass</span><span class="cm-null">(</span><span class="cm-builtin">object</span><span class="cm-null">):</span></pre><pre> </pre><pre><span class="cm-null">    </span><span class="cm-keyword">def</span><span class="cm-null"> </span><span class="cm-variable">__init__</span><span class="cm-null">(</span><span class="cm-variable">self</span><span class="cm-null">):</span></pre><pre><span class="cm-null">        </span><span class="cm-variable">self._value</span><span class="cm-null"> = </span><span class="cm-variable">None</span></pre><pre><span class="cm-null">        </span></pre><pre><span class="cm-null">    </span><span class="cm-error">@property</span></pre><pre><span class="cm-null">    </span><span class="cm-keyword">def</span><span class="cm-null"> </span><span class="cm-variable">myproperty</span><span class="cm-null">(</span><span class="cm-variable">self</span><span class="cm-null">):</span></pre><pre><span class="cm-null">        </span><span class="cm-keyword">print</span><span class="cm-null"> </span><span class="cm-string">'Getting myproperty'</span></pre><pre><span class="cm-null">        </span><span class="cm-keyword">return</span><span class="cm-null"> </span><span class="cm-variable">self._value</span></pre><pre><span class="cm-null">        </span></pre><pre><span class="cm-null">    </span><span class="cm-meta">@myproperty</span><span class="cm-variable">.setter</span></pre><pre><span class="cm-null">    </span><span class="cm-keyword">def</span><span class="cm-null"> </span><span class="cm-variable">myproperty</span><span class="cm-null">(</span><span class="cm-variable">self</span><span class="cm-null">, </span><span class="cm-variable">value</span><span class="cm-null">):</span></pre><pre><span class="cm-null">        </span><span class="cm-keyword">print</span><span class="cm-null"> </span><span class="cm-string">'Setting myproperty'</span></pre><pre><span class="cm-null">        </span><span class="cm-variable">self._value</span><span class="cm-null"> = </span><span class="cm-variable">value</span></pre><pre><span class="cm-null">        </span></pre><pre><span class="cm-null">    </span></pre><pre><span class="cm-variable">x</span><span class="cm-null"> = </span><span class="cm-variable">MyClass</span><span class="cm-null">()</span></pre><pre><span class="cm-keyword">print</span><span class="cm-null"> </span><span class="cm-variable">x.myproperty</span></pre><pre><span class="cm-keyword">print</span></pre><pre> </pre><pre><span class="cm-variable">x.myproperty</span><span class="cm-null"> = </span><span class="cm-number">5</span></pre><pre><span class="cm-keyword">print</span><span class="cm-null"> </span><span class="cm-variable">x.myproperty</span></pre></div></div></div></div></div></div></div></div></div><div style="display: -moz-box;" class="output vbox"><div class="hbox output_area"><div class="prompt"></div><div class="box_flex1 output_subarea output_text output_stream output_stdout"><pre>Getting myproperty
None

Setting myproperty
Getting myproperty
5</pre></div></div></div></div><div tabindex="2" class="cell border-box-sizing code_cell vbox"><div class="input hbox"><div class="prompt input_prompt">In&nbsp;[14]:</div><div class="input_area box-flex1"><div class="CodeMirror"><div style="overflow: hidden; position: relative; width: 1px; height: 0px; top: 0px; left: 0px;"><textarea style="position: absolute; width: 2px;" wrap="off" autocorrect="off" autocapitalize="off"></textarea></div><div class="CodeMirror-scroll cm-s-ipython"><div style="position: relative; height: 276px;"><div style="position: absolute; height: 0; width: 0; overflow: hidden;"><pre><span>    def do_something_with_instance(self):</span></pre></div><div style="position: relative; top: 0px;"><div style="display: none;" class="CodeMirror-gutter"><div class="CodeMirror-gutter-text"></div></div><div class="CodeMirror-lines"><div style="position: relative;" draggable="true"><pre style="top: 0px; left: 0px;" class="CodeMirror-cursor">&nbsp;</pre><div style=""><pre><span class="cm-keyword">class</span><span class="cm-null"> </span><span class="cm-variable">MyClass</span><span class="cm-null">(</span><span class="cm-builtin">object</span><span class="cm-null">):</span></pre><pre><span class="cm-null">    </span></pre><pre><span class="cm-null">    </span><span class="cm-keyword">def</span><span class="cm-null"> </span><span class="cm-variable">do_something_with_instance</span><span class="cm-null">(</span><span class="cm-variable">self</span><span class="cm-null">):</span></pre><pre><span class="cm-null">        </span><span class="cm-keyword">print</span><span class="cm-null"> </span><span class="cm-string">'Instance method on'</span><span class="cm-null">, </span><span class="cm-variable">self</span></pre><pre><span class="cm-null">        </span></pre><pre><span class="cm-null">    </span><span class="cm-meta">@classmethod</span></pre><pre><span class="cm-null">    </span><span class="cm-keyword">def</span><span class="cm-null"> </span><span class="cm-variable">do_something_with_class</span><span class="cm-null">(</span><span class="cm-variable">cls</span><span class="cm-null">):</span></pre><pre><span class="cm-null">        </span><span class="cm-keyword">print</span><span class="cm-null"> </span><span class="cm-string">'Class method on'</span><span class="cm-null">, </span><span class="cm-variable">cls</span></pre><pre><span class="cm-null">        </span></pre><pre><span class="cm-null">    </span><span class="cm-meta">@staticmethod</span></pre><pre><span class="cm-null">    </span><span class="cm-keyword">def</span><span class="cm-null"> </span><span class="cm-variable">do_something_without_either</span><span class="cm-null">():</span></pre><pre><span class="cm-null">        </span><span class="cm-keyword">print</span><span class="cm-null"> </span><span class="cm-string">'Static method'</span></pre><pre><span class="cm-null">        </span></pre><pre><span class="cm-variable">x</span><span class="cm-null"> = </span><span class="cm-variable">MyClass</span><span class="cm-null">()</span></pre><pre><span class="cm-variable">x.do_something_with_instance</span><span class="cm-null">()</span></pre></div></div></div></div></div></div></div></div></div><div style="display: -moz-box;" class="output vbox"><div class="hbox output_area"><div class="prompt"></div><div class="box_flex1 output_subarea output_text output_stream output_stdout"><pre>Instance method on &lt;__main__.MyClass object at 0x27f3dd0&gt;</pre></div></div></div></div><div tabindex="2" class="cell border-box-sizing code_cell vbox"><div class="input hbox"><div class="prompt input_prompt">In&nbsp;[15]:</div><div class="input_area box-flex1"><div class="CodeMirror"><div style="overflow: hidden; position: relative; width: 1px; height: 0px; top: 0px; left: 0px;"><textarea style="position: absolute; width: 2px;" wrap="off" autocorrect="off" autocapitalize="off"></textarea></div><div class="CodeMirror-scroll cm-s-ipython"><div style="position: relative; height: 30px;"><div style="position: absolute; height: 0; width: 0; overflow: hidden;"><pre><span>x.do_something_with_class()</span></pre></div><div style="position: relative; top: 0px;"><div style="display: none;" class="CodeMirror-gutter"><div class="CodeMirror-gutter-text"></div></div><div class="CodeMirror-lines"><div style="position: relative;" draggable="true"><pre style="top: 0px; left: 0px;" class="CodeMirror-cursor">&nbsp;</pre><div style=""><pre><span class="cm-variable">x.do_something_with_class</span><span class="cm-null">()</span></pre></div></div></div></div></div></div></div></div></div><div style="display: -moz-box;" class="output vbox"><div class="hbox output_area"><div class="prompt"></div><div class="box_flex1 output_subarea output_text output_stream output_stdout"><pre>Class method on &lt;class '__main__.MyClass'&gt;</pre></div></div></div></div><div tabindex="2" class="cell border-box-sizing code_cell vbox"><div class="input hbox"><div class="prompt input_prompt">In&nbsp;[16]:</div><div class="input_area box-flex1"><div class="CodeMirror"><div style="overflow: hidden; position: relative; width: 1px; height: 0px; top: 0px; left: 0px;"><textarea style="position: absolute; width: 2px;" wrap="off" autocorrect="off" autocapitalize="off"></textarea></div><div class="CodeMirror-scroll cm-s-ipython"><div style="position: relative; height: 30px;"><div style="position: absolute; height: 0; width: 0; overflow: hidden;"><pre><span>MyClass.do_something_with_class()</span></pre></div><div style="position: relative; top: 0px;"><div style="display: none;" class="CodeMirror-gutter"><div class="CodeMirror-gutter-text"></div></div><div class="CodeMirror-lines"><div style="position: relative;" draggable="true"><pre style="top: 0px; left: 0px;" class="CodeMirror-cursor">&nbsp;</pre><div style=""><pre><span class="cm-variable">MyClass.do_something_with_class</span><span class="cm-null">()</span></pre></div></div></div></div></div></div></div></div></div><div style="display: -moz-box;" class="output vbox"><div class="hbox output_area"><div class="prompt"></div><div class="box_flex1 output_subarea output_text output_stream output_stdout"><pre>Class method on &lt;class '__main__.MyClass'&gt;</pre></div></div></div></div><div tabindex="2" class="cell border-box-sizing code_cell vbox"><div class="input hbox"><div class="prompt input_prompt">In&nbsp;[17]:</div><div class="input_area box-flex1"><div class="CodeMirror"><div style="overflow: hidden; position: relative; width: 1px; height: 0px; top: 0px; left: 0px;"><textarea style="position: absolute; width: 2px;" wrap="off" autocorrect="off" autocapitalize="off"></textarea></div><div class="CodeMirror-scroll cm-s-ipython"><div style="position: relative; height: 30px;"><div style="position: absolute; height: 0; width: 0; overflow: hidden;"><pre><span>x.do_something_without_either()</span></pre></div><div style="position: relative; top: 0px;"><div style="display: none;" class="CodeMirror-gutter"><div class="CodeMirror-gutter-text"></div></div><div class="CodeMirror-lines"><div style="position: relative;" draggable="true"><pre style="top: 0px; left: 0px;" class="CodeMirror-cursor">&nbsp;</pre><div style=""><pre><span class="cm-variable">x.do_something_without_either</span><span class="cm-null">()</span></pre></div></div></div></div></div></div></div></div></div><div style="display: -moz-box;" class="output vbox"><div class="hbox output_area"><div class="prompt"></div><div class="box_flex1 output_subarea output_text output_stream output_stdout"><pre>Static method</pre></div></div></div></div><div tabindex="2" class="cell border-box-sizing code_cell vbox"><div class="input hbox"><div class="prompt input_prompt">In&nbsp;[18]:</div><div class="input_area box-flex1"><div class="CodeMirror"><div style="overflow: hidden; position: relative; width: 1px; height: 0px; top: 0px; left: 0px;"><textarea style="position: absolute; width: 2px;" wrap="off" autocorrect="off" autocapitalize="off"></textarea></div><div class="CodeMirror-scroll cm-s-ipython"><div style="position: relative; height: 30px;"><div style="position: absolute; height: 0; width: 0; overflow: hidden;"><pre><span>MyClass.do_something_without_either()</span></pre></div><div style="position: relative; top: 0px;"><div style="display: none;" class="CodeMirror-gutter"><div class="CodeMirror-gutter-text"></div></div><div class="CodeMirror-lines"><div style="position: relative;" draggable="true"><pre style="top: 0px; left: 0px;" class="CodeMirror-cursor">&nbsp;</pre><div style=""><pre><span class="cm-variable">MyClass.do_something_without_either</span><span class="cm-null">()</span></pre></div></div></div></div></div></div></div></div></div><div style="display: -moz-box;" class="output vbox"><div class="hbox output_area"><div class="prompt"></div><div class="box_flex1 output_subarea output_text output_stream output_stdout"><pre>Static method</pre></div></div></div></div><div tabindex="2" class="cell text_cell border-box-sizing"><div style="display: none;" class="text_cell_input"><div class="CodeMirror"><div style="overflow: hidden; position: relative; width: 1px; height: 0px;"><textarea style="position: absolute; width: 2px;" wrap="off" autocorrect="off" autocapitalize="off"></textarea></div><div class="CodeMirror-scroll cm-s-default"><div style="position: relative; height: 1px;"><div style="position: absolute; height: 0; width: 0; overflow: hidden;"><pre>x</pre></div><div style="position: relative"><div style="display: none;" class="CodeMirror-gutter"><div class="CodeMirror-gutter-text"></div></div><div class="CodeMirror-lines"><div style="position: relative" draggable="true"><pre class="CodeMirror-cursor">&nbsp;</pre><div></div></div></div></div></div></div></div></div><div tabindex="-1" class="text_cell_render rendered_html"><h1>Building your own decorators</h1></div></div><div tabindex="2" class="cell border-box-sizing code_cell vbox"><div class="input hbox"><div class="prompt input_prompt">In&nbsp;[25]:</div><div class="input_area box-flex1"><div class="CodeMirror"><div style="overflow: hidden; position: relative; width: 1px; height: 0px; top: 0px; left: 0px;"><textarea style="position: absolute; width: 2px;" wrap="off" autocorrect="off" autocapitalize="off"></textarea></div><div class="CodeMirror-scroll cm-s-ipython"><div style="position: relative; height: 223px;"><div style="position: absolute; height: 0; width: 0; overflow: hidden;"><pre><span>        print 'Calling %s(*%r, **%r)' % (function, args, kwargs)</span></pre></div><div style="position: relative; top: 0px;"><div style="display: none;" class="CodeMirror-gutter"><div class="CodeMirror-gutter-text"></div></div><div class="CodeMirror-lines"><div style="position: relative;" draggable="true"><pre style="top: 0px; left: 0px;" class="CodeMirror-cursor">&nbsp;</pre><div style=""><pre><span class="cm-keyword">def</span><span class="cm-null"> </span><span class="cm-variable">log_function_call</span><span class="cm-null">(</span><span class="cm-variable">function</span><span class="cm-null">):</span></pre><pre><span class="cm-null">    </span><span class="cm-keyword">def</span><span class="cm-null"> </span><span class="cm-variable">wrapper</span><span class="cm-null">(</span><span class="cm-operator">*</span><span class="cm-variable">args</span><span class="cm-null">, </span><span class="cm-operator">**</span><span class="cm-variable">kwargs</span><span class="cm-null">):</span></pre><pre><span class="cm-null">        </span><span class="cm-keyword">print</span><span class="cm-null"> </span><span class="cm-string">'Calling %s(*%r, **%r)'</span><span class="cm-null"> </span><span class="cm-operator">%</span><span class="cm-null"> (</span><span class="cm-variable">function</span><span class="cm-null">, </span><span class="cm-variable">args</span><span class="cm-null">, </span><span class="cm-variable">kwargs</span><span class="cm-null">)</span></pre><pre><span class="cm-null">        </span><span class="cm-keyword">return</span><span class="cm-null"> </span><span class="cm-variable">function</span><span class="cm-null">(</span><span class="cm-operator">*</span><span class="cm-variable">args</span><span class="cm-null">, </span><span class="cm-operator">**</span><span class="cm-variable">kwargs</span><span class="cm-null">)</span></pre><pre><span class="cm-null">    </span><span class="cm-keyword">print</span><span class="cm-null"> </span><span class="cm-string">'returning wrapped %s'</span><span class="cm-null"> </span><span class="cm-operator">%</span><span class="cm-null"> </span><span class="cm-variable">function</span></pre><pre><span class="cm-null">    </span><span class="cm-keyword">return</span><span class="cm-null"> </span><span class="cm-variable">wrapper</span></pre><pre> </pre><pre><span class="cm-meta">@log_function_call</span></pre><pre><span class="cm-keyword">def</span><span class="cm-null"> </span><span class="cm-variable">myfunction</span><span class="cm-null">(</span><span class="cm-variable">a</span><span class="cm-null">, </span><span class="cm-variable">b</span><span class="cm-null">):</span></pre><pre><span class="cm-null">    </span><span class="cm-keyword">print</span><span class="cm-null"> </span><span class="cm-string">'myfunction(%r, %r)'</span><span class="cm-null"> </span><span class="cm-operator">%</span><span class="cm-null"> (</span><span class="cm-variable">a</span><span class="cm-null">,</span><span class="cm-variable">b</span><span class="cm-null">)</span></pre><pre><span class="cm-null">    </span></pre><pre><span class="cm-variable">myfunction</span><span class="cm-null">(</span><span class="cm-number">1</span><span class="cm-null">,</span><span class="cm-number">2</span><span class="cm-null">)</span></pre></div></div></div></div></div></div></div></div></div><div style="display: -moz-box;" class="output vbox"><div class="hbox output_area"><div class="prompt"></div><div class="box_flex1 output_subarea output_text output_stream output_stdout"><pre>returning wrapped &lt;function myfunction at 0x27f4d70&gt;
Calling &lt;function myfunction at 0x27f4d70&gt;(*(1, 2), **{})
myfunction(1, 2)</pre></div></div></div></div><div tabindex="2" class="cell border-box-sizing code_cell vbox"><div class="input hbox"><div class="prompt input_prompt">In&nbsp;[27]:</div><div class="input_area box-flex1"><div class="CodeMirror"><div style="overflow: hidden; position: relative; width: 1px; height: 0px; top: 0px; left: 0px;"><textarea style="position: absolute; width: 2px;" wrap="off" autocorrect="off" autocapitalize="off"></textarea></div><div class="CodeMirror-scroll cm-s-ipython"><div style="position: relative; height: 276px;"><div style="position: absolute; height: 0; width: 0; overflow: hidden;"><pre><span>            print '%s: %s(*%r, **%r)' % (message, function, args, kwargs)</span></pre></div><div style="position: relative; top: 0px;"><div style="display: none;" class="CodeMirror-gutter"><div class="CodeMirror-gutter-text"></div></div><div class="CodeMirror-lines"><div style="position: relative;" draggable="true"><pre style="top: 0px; left: 0px;" class="CodeMirror-cursor">&nbsp;</pre><div style=""><pre><span class="cm-keyword">def</span><span class="cm-null"> </span><span class="cm-variable">log_function_call</span><span class="cm-null">(</span><span class="cm-variable">message</span><span class="cm-null">):</span></pre><pre><span class="cm-null">    </span><span class="cm-keyword">def</span><span class="cm-null"> </span><span class="cm-variable">decorator</span><span class="cm-null">(</span><span class="cm-variable">function</span><span class="cm-null">):</span></pre><pre><span class="cm-null">        </span><span class="cm-keyword">def</span><span class="cm-null"> </span><span class="cm-variable">wrapper</span><span class="cm-null">(</span><span class="cm-operator">*</span><span class="cm-variable">args</span><span class="cm-null">, </span><span class="cm-operator">**</span><span class="cm-variable">kwargs</span><span class="cm-null">):</span></pre><pre><span class="cm-null">            </span><span class="cm-keyword">print</span><span class="cm-null"> </span><span class="cm-string">'%s: %s(*%r, **%r)'</span><span class="cm-null"> </span><span class="cm-operator">%</span><span class="cm-null"> (</span><span class="cm-variable">message</span><span class="cm-null">, </span><span class="cm-variable">function</span><span class="cm-null">, </span><span class="cm-variable">args</span><span class="cm-null">, </span><span class="cm-variable">kwargs</span><span class="cm-null">)</span></pre><pre><span class="cm-null">            </span><span class="cm-keyword">return</span><span class="cm-null"> </span><span class="cm-variable">function</span><span class="cm-null">(</span><span class="cm-operator">*</span><span class="cm-variable">args</span><span class="cm-null">, </span><span class="cm-operator">**</span><span class="cm-variable">kwargs</span><span class="cm-null">)</span></pre><pre><span class="cm-null">        </span><span class="cm-keyword">print</span><span class="cm-null"> </span><span class="cm-string">'returning wrapped %s'</span><span class="cm-null"> </span><span class="cm-operator">%</span><span class="cm-null"> </span><span class="cm-variable">function</span></pre><pre><span class="cm-null">        </span><span class="cm-keyword">return</span><span class="cm-null"> </span><span class="cm-variable">wrapper</span></pre><pre><span class="cm-null">    </span><span class="cm-keyword">print</span><span class="cm-null"> </span><span class="cm-string">'returning decorator(%r)'</span><span class="cm-null"> </span><span class="cm-operator">%</span><span class="cm-null"> </span><span class="cm-variable">message</span></pre><pre><span class="cm-null">    </span><span class="cm-keyword">return</span><span class="cm-null"> </span><span class="cm-variable">decorator</span></pre><pre> </pre><pre><span class="cm-meta">@log_function_call</span><span class="cm-null">(</span><span class="cm-string">'log1'</span><span class="cm-null">)</span></pre><pre><span class="cm-keyword">def</span><span class="cm-null"> </span><span class="cm-variable">myfunction</span><span class="cm-null">(</span><span class="cm-variable">a</span><span class="cm-null">, </span><span class="cm-variable">b</span><span class="cm-null">):</span></pre><pre><span class="cm-null">    </span><span class="cm-keyword">print</span><span class="cm-null"> </span><span class="cm-string">'myfunction(%r, %r)'</span><span class="cm-null"> </span><span class="cm-operator">%</span><span class="cm-null"> (</span><span class="cm-variable">a</span><span class="cm-null">,</span><span class="cm-variable">b</span><span class="cm-null">)</span></pre><pre><span class="cm-null">    </span></pre><pre><span class="cm-variable">myfunction</span><span class="cm-null">(</span><span class="cm-number">1</span><span class="cm-null">,</span><span class="cm-number">2</span><span class="cm-null">)</span></pre></div></div></div></div></div></div></div></div></div><div style="display: -moz-box;" class="output vbox"><div class="hbox output_area"><div class="prompt"></div><div class="box_flex1 output_subarea output_text output_stream output_stdout"><pre>returning decorator('log1')
returning wrapped &lt;function myfunction at 0x27f4d70&gt;
log1: &lt;function myfunction at 0x27f4d70&gt;(*(1, 2), **{})
myfunction(1, 2)</pre></div></div></div></div><div tabindex="2" class="cell text_cell border-box-sizing"><div style="display: none;" class="text_cell_input"><div class="CodeMirror"><div style="overflow: hidden; position: relative; width: 1px; height: 0px;"><textarea style="position: absolute; width: 2px;" wrap="off" autocorrect="off" autocapitalize="off"></textarea></div><div class="CodeMirror-scroll cm-s-default"><div style="position: relative; height: 2px;"><div style="position: absolute; height: 0; width: 0; overflow: hidden;"><pre>x</pre></div><div style="position: relative"><div style="display: none;" class="CodeMirror-gutter"><div class="CodeMirror-gutter-text"></div></div><div class="CodeMirror-lines"><div style="position: relative" draggable="true"><pre class="CodeMirror-cursor">&nbsp;</pre><div></div></div></div></div></div></div></div></div><div tabindex="-1" class="text_cell_render rendered_html"><p>To simplify things a bit, we can also use the magic <code>__call__</code> method to define a decorator
that takes arguments:</p></div></div><div tabindex="2" class="cell border-box-sizing code_cell vbox"><div class="input hbox"><div class="prompt input_prompt">In&nbsp;[28]:</div><div class="input_area box-flex1"><div class="CodeMirror"><div style="overflow: hidden; position: relative; width: 1px; height: 0px; top: 0px; left: 0px;"><textarea style="position: absolute; width: 2px;" wrap="off" autocorrect="off" autocapitalize="off"></textarea></div><div class="CodeMirror-scroll cm-s-ipython"><div style="position: relative; height: 276px;"><div style="position: absolute; height: 0; width: 0; overflow: hidden;"><pre><span>                self._message, function, args, kwargs)</span></pre></div><div style="position: relative; top: 0px;"><div style="display: none;" class="CodeMirror-gutter"><div class="CodeMirror-gutter-text"></div></div><div class="CodeMirror-lines"><div style="position: relative;" draggable="true"><pre style="top: 0px; left: 0px;" class="CodeMirror-cursor">&nbsp;</pre><div style=""><pre><span class="cm-keyword">class</span><span class="cm-null"> </span><span class="cm-variable">log_function_call</span><span class="cm-null">(</span><span class="cm-builtin">object</span><span class="cm-null">):</span></pre><pre><span class="cm-null">    </span><span class="cm-keyword">def</span><span class="cm-null"> </span><span class="cm-variable">__init__</span><span class="cm-null">(</span><span class="cm-variable">self</span><span class="cm-null">, </span><span class="cm-variable">message</span><span class="cm-null">):</span></pre><pre><span class="cm-null">        </span><span class="cm-variable">self._message</span><span class="cm-null"> = </span><span class="cm-variable">message</span></pre><pre><span class="cm-null">    </span><span class="cm-keyword">def</span><span class="cm-null"> </span><span class="cm-variable">__call__</span><span class="cm-null">(</span><span class="cm-variable">self</span><span class="cm-null">, </span><span class="cm-variable">function</span><span class="cm-null">):</span></pre><pre><span class="cm-null">        </span><span class="cm-keyword">def</span><span class="cm-null"> </span><span class="cm-variable">wrapper</span><span class="cm-null">(</span><span class="cm-operator">*</span><span class="cm-variable">args</span><span class="cm-null">, </span><span class="cm-operator">**</span><span class="cm-variable">kwargs</span><span class="cm-null">):</span></pre><pre><span class="cm-null">            </span><span class="cm-keyword">print</span><span class="cm-null"> </span><span class="cm-string">'%s: %s(*%r, **%r)'</span><span class="cm-null"> </span><span class="cm-operator">%</span><span class="cm-null"> (</span></pre><pre><span class="cm-null">                </span><span class="cm-variable">self._message</span><span class="cm-null">, </span><span class="cm-variable">function</span><span class="cm-null">, </span><span class="cm-variable">args</span><span class="cm-null">, </span><span class="cm-variable">kwargs</span><span class="cm-error">)</span></pre><pre><span class="cm-null">            </span><span class="cm-keyword">return</span><span class="cm-null"> </span><span class="cm-variable">function</span><span class="cm-null">(</span><span class="cm-operator">*</span><span class="cm-variable">args</span><span class="cm-null">, </span><span class="cm-operator">**</span><span class="cm-variable">kwargs</span><span class="cm-null">)</span></pre><pre><span class="cm-null">        </span><span class="cm-keyword">return</span><span class="cm-null"> </span><span class="cm-variable">wrapper</span></pre><pre><span class="cm-null">    </span></pre><pre><span class="cm-meta">@log_function_call</span><span class="cm-null">(</span><span class="cm-string">'log1'</span><span class="cm-null">)</span></pre><pre><span class="cm-keyword">def</span><span class="cm-null"> </span><span class="cm-variable">myfunction</span><span class="cm-null">(</span><span class="cm-variable">a</span><span class="cm-null">, </span><span class="cm-variable">b</span><span class="cm-null">):</span></pre><pre><span class="cm-null">    </span><span class="cm-keyword">print</span><span class="cm-null"> </span><span class="cm-string">'myfunction(%r, %r)'</span><span class="cm-null"> </span><span class="cm-operator">%</span><span class="cm-null"> (</span><span class="cm-variable">a</span><span class="cm-null">,</span><span class="cm-variable">b</span><span class="cm-null">)</span></pre><pre><span class="cm-null">    </span></pre><pre><span class="cm-variable">myfunction</span><span class="cm-null">(</span><span class="cm-number">1</span><span class="cm-null">,</span><span class="cm-number">2</span><span class="cm-null">)            </span></pre></div></div></div></div></div></div></div></div></div><div style="display: -moz-box;" class="output vbox"><div class="hbox output_area"><div class="prompt"></div><div class="box_flex1 output_subarea output_text output_stream output_stdout"><pre>log1: &lt;function myfunction at 0x27eaed8&gt;(*(1, 2), **{})
myfunction(1, 2)</pre></div></div></div></div><div tabindex="2" class="cell text_cell border-box-sizing"><div style="display: none;" class="text_cell_input"><div class="CodeMirror"><div style="overflow: hidden; position: relative; width: 1px; height: 0px;"><textarea style="position: absolute; width: 2px;" wrap="off" autocorrect="off" autocapitalize="off"></textarea></div><div class="CodeMirror-scroll cm-s-default"><div style="position: relative; height: 1px;"><div style="position: absolute; height: 0; width: 0; overflow: hidden;"><pre>x</pre></div><div style="position: relative"><div style="display: none;" class="CodeMirror-gutter"><div class="CodeMirror-gutter-text"></div></div><div class="CodeMirror-lines"><div style="position: relative" draggable="true"><pre class="CodeMirror-cursor">&nbsp;</pre><div></div></div></div></div></div></div></div></div><div tabindex="-1" class="text_cell_render rendered_html"><p>One useful decorator to build is one that <em>memoizes</em> function results:</p></div></div><div tabindex="2" class="cell border-box-sizing code_cell vbox"><div class="input hbox"><div class="prompt input_prompt">In&nbsp;[38]:</div><div class="input_area box-flex1"><div class="CodeMirror"><div style="overflow: hidden; position: relative; width: 1px; height: 0px; top: 0px; left: 0px;"><textarea style="position: absolute; width: 2px;" wrap="off" autocorrect="off" autocapitalize="off"></textarea></div><div class="CodeMirror-scroll cm-s-ipython"><div style="position: relative; height: 382px;"><div style="position: absolute; height: 0; width: 0; overflow: hidden;"><pre><span>        cache_key = (args, tuple(sorted(kwargs.items())))</span></pre></div><div style="position: relative; top: 0px;"><div style="display: none;" class="CodeMirror-gutter"><div class="CodeMirror-gutter-text"></div></div><div class="CodeMirror-lines"><div style="position: relative;" draggable="true"><pre style="top: 0px; left: 0px;" class="CodeMirror-cursor">&nbsp;</pre><div style=""><pre><span class="cm-keyword">def</span><span class="cm-null"> </span><span class="cm-variable">memoize</span><span class="cm-null">(</span><span class="cm-variable">function</span><span class="cm-null">):</span></pre><pre><span class="cm-null">    </span><span class="cm-variable">cache</span><span class="cm-null"> = {}</span></pre><pre><span class="cm-null">    </span><span class="cm-keyword">def</span><span class="cm-null"> </span><span class="cm-variable">wrapper</span><span class="cm-null">(</span><span class="cm-operator">*</span><span class="cm-variable">args</span><span class="cm-null">, </span><span class="cm-operator">**</span><span class="cm-variable">kwargs</span><span class="cm-null">):</span></pre><pre><span class="cm-null">        </span><span class="cm-variable">cache_key</span><span class="cm-null"> = (</span><span class="cm-variable">args</span><span class="cm-null">, </span><span class="cm-builtin">tuple</span><span class="cm-null">(</span><span class="cm-variable">sorted</span><span class="cm-null">(</span><span class="cm-variable">kwargs.items</span><span class="cm-null">())))</span></pre><pre><span class="cm-null">        </span><span class="cm-keyword">if</span><span class="cm-null"> </span><span class="cm-variable">cache_key</span><span class="cm-null"> </span><span class="cm-operator">in</span><span class="cm-null"> </span><span class="cm-variable">cache</span><span class="cm-null">:</span></pre><pre><span class="cm-null">            </span><span class="cm-keyword">print</span><span class="cm-null"> </span><span class="cm-string">'-- return cached value for'</span><span class="cm-null">, </span><span class="cm-variable">cache_key</span></pre><pre><span class="cm-null">            </span><span class="cm-keyword">return</span><span class="cm-null"> </span><span class="cm-variable">cache</span><span class="cm-null">[</span><span class="cm-variable">cache_key</span><span class="cm-null">]</span></pre><pre><span class="cm-null">        </span><span class="cm-variable">result</span><span class="cm-null"> = </span><span class="cm-variable">function</span><span class="cm-null">(</span><span class="cm-operator">*</span><span class="cm-variable">args</span><span class="cm-null">, </span><span class="cm-operator">**</span><span class="cm-variable">kwargs</span><span class="cm-null">)</span></pre><pre><span class="cm-null">        </span><span class="cm-variable">cache</span><span class="cm-null">[</span><span class="cm-variable">cache_key</span><span class="cm-null">] = </span><span class="cm-variable">result</span></pre><pre><span class="cm-null">        </span><span class="cm-keyword">return</span><span class="cm-null"> </span><span class="cm-variable">result</span></pre><pre><span class="cm-null">    </span><span class="cm-keyword">return</span><span class="cm-null"> </span><span class="cm-variable">wrapper</span></pre><pre> </pre><pre><span class="cm-meta">@memoize</span></pre><pre><span class="cm-keyword">def</span><span class="cm-null"> </span><span class="cm-variable">my_function</span><span class="cm-null">(</span><span class="cm-variable">a</span><span class="cm-null">, </span><span class="cm-variable">b</span><span class="cm-null">):</span></pre><pre><span class="cm-null">    </span><span class="cm-keyword">print</span><span class="cm-null"> </span><span class="cm-string">'Calling my_function(%r,%r)'</span><span class="cm-null"> </span><span class="cm-operator">%</span><span class="cm-null"> (</span><span class="cm-variable">a</span><span class="cm-null">,</span><span class="cm-variable">b</span><span class="cm-null">)</span></pre><pre> </pre><pre><span class="cm-variable">my_function</span><span class="cm-null">(</span><span class="cm-number">1</span><span class="cm-null">,</span><span class="cm-number">2</span><span class="cm-null">)</span></pre><pre><span class="cm-variable">my_function</span><span class="cm-null">(</span><span class="cm-number">1</span><span class="cm-null">,</span><span class="cm-number">2</span><span class="cm-null">)</span></pre><pre><span class="cm-variable">my_function</span><span class="cm-null">(</span><span class="cm-number">1</span><span class="cm-null">,</span><span class="cm-number">2</span><span class="cm-null">)</span></pre><pre><span class="cm-variable">my_function</span><span class="cm-null">(</span><span class="cm-number">3</span><span class="cm-null">,</span><span class="cm-number">4</span><span class="cm-null">)</span></pre><pre><span class="cm-variable">my_function</span><span class="cm-null">(</span><span class="cm-number">5</span><span class="cm-null">,</span><span class="cm-number">6</span><span class="cm-null">)</span></pre></div></div></div></div></div></div></div></div></div><div style="display: -moz-box;" class="output vbox"><div class="hbox output_area"><div class="prompt"></div><div class="box_flex1 output_subarea output_text output_stream output_stdout"><pre>Calling my_function(1,2)
-- return cached value for ((1, 2), ())
-- return cached value for ((1, 2), ())
Calling my_function(3,4)
Calling my_function(5,6)</pre></div></div></div></div><div tabindex="2" class="cell text_cell border-box-sizing"><div style="display: none;" class="text_cell_input"><div class="CodeMirror"><div style="overflow: hidden; position: relative; width: 1px; height: 0px;"><textarea style="position: absolute; width: 2px;" wrap="off" autocorrect="off" autocapitalize="off"></textarea></div><div class="CodeMirror-scroll cm-s-default"><div style="position: relative; height: 7px;"><div style="position: absolute; height: 0; width: 0; overflow: hidden;"><pre>x</pre></div><div style="position: relative"><div style="display: none;" class="CodeMirror-gutter"><div class="CodeMirror-gutter-text"></div></div><div class="CodeMirror-lines"><div style="position: relative" draggable="true"><pre class="CodeMirror-cursor">&nbsp;</pre><div></div></div></div></div></div></div></div></div><div tabindex="-1" class="text_cell_render rendered_html"><h3>Exercises</h3>

<ul>
<li>Write a class that uses <code>@property</code> to provide read-only access to an underlying "private"
attribute</li>
<li>Write a decorator that takes a logger and logs all entries/exits of a function</li>
<li>Write a decorator that opens a file at the beginning of a function and closes it at the end, 
passing the opened file as the first argument of the inner function.</li>
</ul></div></div><div style="height: 30%;" class="end_space"></div></body></html>